(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{666:function(e,n,t){"use strict";t.r(n);var r=t(1),i=t.n(r),a=t(2),o=t.n(a),c=t(412),u=t.n(c),s=t(603),l=t(669),f=t(84);function p(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],0<=n.indexOf(t)||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],0<=n.indexOf(t)||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}function m(e,n,t,r,a,o,c){try{var i=e[o](c),u=i.value}catch(e){return void t(e)}i.done?n(u):Promise.resolve(u).then(r,a)}function g(i){return function(){var e=this,c=arguments;return new Promise(function(n,t){var r=i.apply(e,c);function a(e){m(r,n,t,a,o,"next",e)}function o(e){m(r,n,t,a,o,"throw",e)}a(void 0)})}}function b(e){var n=e.methodType;return{method:void 0===n?"GET":n,headers:{"Content-Type":"application/json"}}}function d(e){var n=e.value,t=e.isLoading,r=e.onChange,a=e.onSubmit,o=e.classes,c=Object.values(n).every(function(e){return""!==e});return i.a.createElement("form",{className:o.container,onSubmit:a},i.a.createElement(O.a,{label:"Username",value:n.username,name:"username",onChange:r,margin:"normal",fullWidth:!0,autoFocus:!0,autoComplete:"off"}),i.a.createElement(O.a,{label:"Password",value:n.password,name:"password",onChange:r,margin:"normal",fullWidth:!0,type:"password"}),i.a.createElement(T.a,{onClick:a,variant:"outlined",color:"primary",fullWidth:!0,className:o.button,disabled:!c,type:"submit"},t?i.a.createElement(S.a,{size:20}):"Login"))}var h,v,y,k={onLogin:(y=g(regeneratorRuntime.mark(function e(n){var t,r,a,o,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.cancelToken,r=p(n,["cancelToken"]),a="".concat(f.a,"/api/auth/login"),e.prev=2,e.next=5,u()(a,Object.assign({},b({methodType:"POST"}),{cancelToken:t,data:r}));case 5:return o=e.sent,c=o.data,e.abrupt("return",c);case 10:throw e.prev=10,e.t0=e.catch(2),e.t0;case 13:case"end":return e.stop()}},e,null,[[2,10]])})),function(e){return y.apply(this,arguments)}),onValidate:(v=g(regeneratorRuntime.mark(function e(n){var t,r,a,o,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.cancelToken,r=n.accessToken,a="".concat(f.a,"/something"),e.prev=2,e.next=5,u()(a,{method:"GET",headers:{access_token:r},cancelToken:t});case 5:return o=e.sent,c=o.data,e.abrupt("return",c);case 10:throw e.prev=10,e.t0=e.catch(2),e.t0;case 13:case"end":return e.stop()}},e,null,[[2,10]])})),function(e){return v.apply(this,arguments)}),onRefresh:(h=g(regeneratorRuntime.mark(function e(n){var t,r,a,o,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.cancelToken,r=p(n,["cancelToken"]),a="".concat(f.a,"/something"),e.prev=2,e.next=5,u()(a,Object.assign({},b({methodType:"POST"}),{cancelToken:t,data:r}));case 5:return o=e.sent,c=o.data,e.abrupt("return",c);case 10:throw e.prev=10,e.t0=e.catch(2),e.t0;case 13:case"end":return e.stop()}},e,null,[[2,10]])})),function(e){return h.apply(this,arguments)})},w=t(116),O=t(661),T=t(652),S=t(371);d.propTypes={value:o.a.object,isLoading:o.a.bool,onChange:o.a.func,onSubmit:o.a.func,classes:o.a.object};function j(e){var n=e.classes;return i.a.createElement(r.Fragment,null,i.a.createElement("img",{src:"/images/rentronics_logo2.png",alt:"app logo",className:n.logo}))}var x=Object(w.a)(function(e){return{container:{backgroundColor:"#fff",padding:"".concat(1.5*e.margin,"px ").concat(e.margin,"px"),width:450,borderRadius:6,margin:"0 auto"},button:{borderColor:e.palette.primary.main,marginTop:e.margin},forgotContainer:{textAlign:"center",marginTop:2*e.margin}}})(d);j.propTypes={classes:o.a.object};var C=Object(w.a)(function(e){return{heading:{color:"#fff",textAlign:"center",marginBottom:2*e.margin},logo:{width:250,heading:250,objectFit:"cover",marginBottom:2*e.margin}}})(j);function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,n,t,r,a,o,c){try{var i=e[o](c),u=i.value}catch(e){return void t(e)}i.done?n(u):Promise.resolve(u).then(r,a)}function _(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F(e,n){return(F=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function H(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function N(){var e=function(e,n){n=n||e.slice(0);return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  height: 100vh;\n  background-color: #d0e1e8;\n"]);return N=function(){return e},e}var z=s.a.section(N()),A=function(){function a(){var e,i;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,a);for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return H(L(i=function(e,n){return!n||"object"!==E(n)&&"function"!=typeof n?L(e):n}(this,(e=R(a)).call.apply(e,[this].concat(t)))),"isTokenSource",u.a.CancelToken.source()),H(L(i),"state",{form:{username:"",password:""},isLoading:!1,isSnackbarOpen:!1,snackbarMessage:""}),H(L(i),"onHandleChangeForm",function(e){var n=i.state.form;n[e.target.name]=e.target.value,i.setState({form:n})}),H(L(i),"onHandleSubmitForm",function(){var n=function(i){return function(){var e=this,c=arguments;return new Promise(function(n,t){var r=i.apply(e,c);function a(e){P(r,n,t,a,o,"next",e)}function o(e){P(r,n,t,a,o,"throw",e)}a(void 0)})}}(regeneratorRuntime.mark(function e(n){var t,r,a,o,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),t=i.props.history,r=i.state.form,Object.values(r).every(function(e){return""===e}))return e.abrupt("return");e.next=6;break;case 6:return e.prev=6,i.setState({isLoading:!0}),e.next=10,k.onLogin({cancelToken:i.isTokenSource.token,username:r.username,password:r.password});case 10:a=e.sent,i.setState({isLoading:!1}),f.b.set({token:a.token,refreshToken:"",roleName:a.role_name,franchiseId:a.franchise_id,userName:a.user_name}),t.push("/auth"),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(6),u.a.isCancel(e.t0)?console.log("Request canceled",e.t0.message):(o=e.t0.response.data,c=o.message,"401"===o.errorCode&&i.onToggleSnackbar({message:c}),i.setState({isLoading:!1}));case 19:case"end":return e.stop()}},e,null,[[6,16]])}));return function(e){return n.apply(this,arguments)}}()),H(L(i),"onToggleSnackbar",function(e){var n=e.message,t=void 0===n?"Error":n;i.setState(function(e){return{isSnackbarOpen:!e.isSnackbarOpen,snackbarMessage:t}})}),i}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&F(e,n)}(a,r["Component"]),function(e,n,t){n&&_(e.prototype,n),t&&_(e,t)}(a,[{key:"componentWillUnmount",value:function(){this.isTokenSource.cancel("API Cancel")}},{key:"render",value:function(){var e=this.state,n=e.form,t=e.isLoading,r=e.isSnackbarOpen,a=e.snackbarMessage;return i.a.createElement(z,null,i.a.createElement(C,null),i.a.createElement(x,{value:n,isLoading:t,onChange:this.onHandleChangeForm,onSubmit:this.onHandleSubmitForm}),i.a.createElement(l.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:r,autoHideDuration:6e3,onClose:this.onToggleSnackbar,ContentProps:{"aria-describedby":"message-id"},message:i.a.createElement("span",{id:"message-id"},a)}))}}]),a}();A.propTypes={history:o.a.object};n.default=A}}]);